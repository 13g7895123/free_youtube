# YouTube Loop Player - éƒ¨ç½²æ¶æ§‹ç¸½çµ

## ğŸ“‹ éƒ¨ç½²æ–‡ä»¶æ¸…å–®

### ğŸ¯ æ­£å¼ç’°å¢ƒ (Production)
```
docker-compose.prod.yml          # æ­£å¼ç’°å¢ƒ Docker Compose é…ç½®
Dockerfile.prod                  # å‰ç«¯æ­£å¼ç’°å¢ƒ Dockerfile (å¤šéšæ®µæ§‹å»º)
nginx.prod.conf                  # Nginx æ­£å¼ç’°å¢ƒé…ç½®
backend/Dockerfile.prod          # å¾Œç«¯æ­£å¼ç’°å¢ƒ Dockerfile
backend/docker-entrypoint.prod.sh # å¾Œç«¯æ­£å¼ç’°å¢ƒå•Ÿå‹•è…³æœ¬
deploy-prod.sh                   # æ­£å¼ç’°å¢ƒéƒ¨ç½²è…³æœ¬
.env.prod.example                # æ­£å¼ç’°å¢ƒé…ç½®ç¯„ä¾‹
DEPLOYMENT_PROD.md               # æ­£å¼ç’°å¢ƒéƒ¨ç½²æ–‡æª”
```

### ğŸ”§ é–‹ç™¼ç’°å¢ƒ (Development)
```
docker-compose.yml               # é–‹ç™¼ç’°å¢ƒ Docker Compose é…ç½®
Dockerfile                       # å‰ç«¯é–‹ç™¼ç’°å¢ƒ Dockerfile
nginx.conf                       # Nginx é–‹ç™¼ç’°å¢ƒé…ç½®
backend/Dockerfile               # å¾Œç«¯é–‹ç™¼ç’°å¢ƒ Dockerfile
backend/docker-entrypoint.sh     # å¾Œç«¯é–‹ç™¼ç’°å¢ƒå•Ÿå‹•è…³æœ¬
deploy.sh                        # é–‹ç™¼ç’°å¢ƒéƒ¨ç½²è…³æœ¬
.env.example                     # é–‹ç™¼ç’°å¢ƒé…ç½®ç¯„ä¾‹
```

### ğŸš€ CI/CD
```
.github/workflows/ci-cd.yml      # GitHub Actions CI/CD é…ç½®
CICD_GUIDE.md                    # CI/CD ä½¿ç”¨æŒ‡å—
```

## ğŸ—ï¸ æ¶æ§‹å°æ¯”

| ç‰¹æ€§ | é–‹ç™¼ç’°å¢ƒ | æ­£å¼ç’°å¢ƒ |
|-----|---------|---------|
| **æ§‹å»ºæ–¹å¼** | å–®éšæ®µæ§‹å»º | å¤šéšæ®µæ§‹å»º |
| **é¡åƒå¤§å°** | è¼ƒå¤§ | å„ªåŒ–éï¼Œè¼ƒå° |
| **å•Ÿå‹•é€Ÿåº¦** | è¼ƒå¿« | æ­£å¸¸ |
| **å®‰å…¨æ€§** | åŸºæœ¬ | å¢å¼· (é rootã€å®‰å…¨æ¨™é ­) |
| **æ€§èƒ½å„ªåŒ–** | ç„¡ | OPcacheã€Gzipã€ç·©å­˜ |
| **æ—¥èªŒç®¡ç†** | åŸºæœ¬ | è¼ªè½‰ã€é™åˆ¶å¤§å° |
| **å¥åº·æª¢æŸ¥** | åŸºæœ¬ | å®Œæ•´ |
| **å®¹å™¨åç¨±** | free_youtube_* | free_youtube_*_prod |
| **ç¶²è·¯åç¨±** | app_network | app_network_prod |
| **æ•¸æ“šå·** | mariadb_data | mariadb_prod_data |
| **éƒ¨ç½²è…³æœ¬** | deploy.sh | deploy-prod.sh |
| **è§¸ç™¼åˆ†æ”¯** | develop | master |

## ğŸ“Š éƒ¨ç½²æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é–‹ç™¼æµç¨‹                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é–‹ç™¼äººå“¡ â†’ feature branch â†’ develop branch â†’ CI/CD
                                            â†“
                                    deploy-development job
                                            â†“
                                    åŸ·è¡Œ deploy.sh
                                            â†“
                                    é–‹ç™¼ç’°å¢ƒ (port: 80, 8080)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ­£å¼ç™¼å¸ƒæµç¨‹                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

develop branch â†’ PR â†’ master branch â†’ CI/CD
                                        â†“
                                deploy-production job
                                        â†“
                                åŸ·è¡Œ deploy-prod.sh
                                        â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                               â”‚
                    å‰ç½®æª¢æŸ¥                         æ•¸æ“šå‚™ä»½
                        â”‚                               â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â†“
                            æ§‹å»º Docker é¡åƒ (å¤šéšæ®µ)
                                        â†“
                                    å•Ÿå‹•æœå‹™
                                        â†“
                                    å¥åº·æª¢æŸ¥
                                        â†“
                            æ­£å¼ç’°å¢ƒ (port: 80, 8080)
```

## ğŸ”„ CI/CD è‡ªå‹•åŒ–æµç¨‹

### Master åˆ†æ”¯ (æ­£å¼ç’°å¢ƒ)
```yaml
è§¸ç™¼: push to master
â†“
GitHub Actions: deploy-production
â†“
1. Checkout code
2. Setup SSH
3. Connect to VPS
4. Pull latest code
5. chmod +x deploy-prod.sh
6. Execute ./deploy-prod.sh
   â”œâ”€ å‰ç½®æª¢æŸ¥
   â”œâ”€ ç’°å¢ƒé…ç½®é©—è­‰
   â”œâ”€ å¯é¸æ•¸æ“šå‚™ä»½
   â”œâ”€ åœæ­¢èˆŠæœå‹™
   â”œâ”€ æ§‹å»ºæ–°é¡åƒ
   â”œâ”€ å•Ÿå‹•æœå‹™
   â”œâ”€ å¥åº·æª¢æŸ¥
   â””â”€ é©—è­‰éƒ¨ç½²
7. Notify status
```

### Develop åˆ†æ”¯ (é–‹ç™¼ç’°å¢ƒ)
```yaml
è§¸ç™¼: push to develop
â†“
GitHub Actions: deploy-development
â†“
1. Checkout code
2. Setup SSH
3. Connect to VPS
4. Pull latest code
5. chmod +x deploy.sh
6. Execute ./deploy.sh
   â”œâ”€ æª¢æŸ¥ Docker
   â”œâ”€ é©—è­‰ç›®éŒ„çµæ§‹
   â”œâ”€ å®‰è£ä¾è³´
   â”œâ”€ æ§‹å»ºå‰ç«¯
   â”œâ”€ å•Ÿå‹• Docker Compose
   â””â”€ é©—è­‰æœå‹™
7. Notify status
```

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### æœ¬åœ°é–‹ç™¼
```bash
# 1. å…‹éš†å°ˆæ¡ˆ
git clone <repository>
cd free_youtube

# 2. é…ç½®ç’°å¢ƒ
cp .env.example .env

# 3. å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ
./deploy.sh

# 4. è¨ªå•æ‡‰ç”¨
open http://localhost:80
```

### éƒ¨ç½²åˆ°é–‹ç™¼ç’°å¢ƒ (VPS)
```bash
# æ–¹å¼ 1: è‡ªå‹•éƒ¨ç½²
git checkout develop
git add .
git commit -m "feat: new feature"
git push origin develop
# GitHub Actions è‡ªå‹•éƒ¨ç½²

# æ–¹å¼ 2: æ‰‹å‹•éƒ¨ç½²
ssh user@vps
cd /home/jarvis/project/idea/free_youtube
git pull
./deploy.sh
```

### éƒ¨ç½²åˆ°æ­£å¼ç’°å¢ƒ (VPS)
```bash
# æ–¹å¼ 1: è‡ªå‹•éƒ¨ç½² (æ¨è–¦)
git checkout develop
# ... é–‹ç™¼å’Œæ¸¬è©¦ ...
git checkout master
git merge develop
git push origin master
# GitHub Actions è‡ªå‹•éƒ¨ç½²åˆ°æ­£å¼ç’°å¢ƒ

# æ–¹å¼ 2: æ‰‹å‹•éƒ¨ç½²
ssh user@vps
cd /home/jarvis/project/idea/free_youtube
git checkout master
git pull
./deploy-prod.sh
```

## ğŸ”§ ç’°å¢ƒè®Šæ•¸é…ç½®

### é–‹ç™¼ç’°å¢ƒ (.env)
```bash
MYSQL_ROOT_PASSWORD=secret
MYSQL_PASSWORD=password
MYSQL_DATABASE=free_youtube
FRONTEND_PORT=80
BACKEND_PORT=8080
```

### æ­£å¼ç’°å¢ƒ (.env)
```bash
MYSQL_ROOT_PASSWORD=<strong-random-password>
MYSQL_PASSWORD=<strong-random-password>
MYSQL_DATABASE=free_youtube
FRONTEND_PORT=80
BACKEND_PORT=8080
```

## ğŸ“¦ Docker æœå‹™

### é–‹ç™¼ç’°å¢ƒå®¹å™¨
```
free_youtube_db              # MariaDB 10.6
free_youtube_frontend        # Nginx + Vue.js (é–‹ç™¼æ¨¡å¼)
free_youtube_backend         # PHP 8.1 + CodeIgniter
free_youtube_phpmyadmin      # phpMyAdmin
```

### æ­£å¼ç’°å¢ƒå®¹å™¨
```
free_youtube_db_prod         # MariaDB 10.6
free_youtube_frontend_prod   # Nginx + Vue.js (ç”Ÿç”¢æ§‹å»º)
free_youtube_backend_prod    # PHP 8.1 + CodeIgniter (å„ªåŒ–)
free_youtube_phpmyadmin_prod # phpMyAdmin
```

## ğŸš¨ é‡è¦æ³¨æ„äº‹é …

### âš ï¸ ç’°å¢ƒéš”é›¢
- é–‹ç™¼å’Œæ­£å¼ç’°å¢ƒ**å®Œå…¨ç¨ç«‹**
- ä½¿ç”¨ä¸åŒçš„å®¹å™¨ã€ç¶²è·¯ã€æ•¸æ“šå·
- å¯ä»¥åœ¨åŒä¸€å°æ©Ÿå™¨ä¸Š**åŒæ™‚é‹è¡Œ**
- ç«¯å£é…ç½®éœ€æ³¨æ„é¿å…è¡çª

### âš ï¸ å¯†ç¢¼å®‰å…¨
- æ­£å¼ç’°å¢ƒ**å¿…é ˆ**ä½¿ç”¨å¼·å¯†ç¢¼
- ä¸è¦å°‡ `.env` æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- å®šæœŸæ›´æ›å¯†ç¢¼
- ä½¿ç”¨å¯†ç¢¼ç®¡ç†å·¥å…·

### âš ï¸ éƒ¨ç½²å‰æª¢æŸ¥
```bash
# é–‹ç™¼ç’°å¢ƒ
âœ… æœ¬åœ°æ¸¬è©¦é€šé
âœ… ä»£ç¢¼ review
âœ… æäº¤åˆ° develop åˆ†æ”¯

# æ­£å¼ç’°å¢ƒ
âœ… åœ¨é–‹ç™¼ç’°å¢ƒå……åˆ†æ¸¬è©¦
âœ… Code review é€šé
âœ… æ›´æ–°æ–‡æª”å’Œ CHANGELOG
âœ… ç¢ºèª .env é…ç½®æ­£ç¢º
âœ… å‚™ä»½æ•¸æ“š (å¦‚æœ‰å¿…è¦)
```

## ğŸ“š ç›¸é—œæ–‡æª”

- [**DEPLOYMENT_PROD.md**](DEPLOYMENT_PROD.md) - æ­£å¼ç’°å¢ƒå®Œæ•´éƒ¨ç½²æŒ‡å—
- [**CICD_GUIDE.md**](CICD_GUIDE.md) - CI/CD ä½¿ç”¨æŒ‡å—
- [**README.md**](README.md) - å°ˆæ¡ˆæ¦‚è¿°

## ğŸ” å¿«é€Ÿæª¢æŸ¥æ¸…å–®

### é¦–æ¬¡éƒ¨ç½²æ­£å¼ç’°å¢ƒ
- [ ] è¤‡è£½ `.env.prod.example` ç‚º `.env`
- [ ] ä¿®æ”¹ `.env` ä¸­çš„æ‰€æœ‰å¯†ç¢¼
- [ ] ç¢ºèªç«¯å£é…ç½®ä¸è¡çª
- [ ] è¨­å®š GitHub Secrets (SSH_PRIVATE_KEY, SSH_HOST, SSH_USER)
- [ ] æ¸¬è©¦ SSH é€£æ¥
- [ ] åŸ·è¡Œ `./deploy-prod.sh` æˆ–æ¨é€åˆ° master åˆ†æ”¯
- [ ] é©—è­‰æœå‹™é‹è¡Œæ­£å¸¸
- [ ] é…ç½®é˜²ç«ç‰†è¦å‰‡
- [ ] è¨­ç½®å®šæœŸå‚™ä»½

### æ—¥å¸¸æ›´æ–°
- [ ] åœ¨ develop åˆ†æ”¯é–‹ç™¼å’Œæ¸¬è©¦
- [ ] ç¢ºèªé–‹ç™¼ç’°å¢ƒé‹è¡Œæ­£å¸¸
- [ ] åˆä½µåˆ° master åˆ†æ”¯
- [ ] æ¨é€è§¸ç™¼è‡ªå‹•éƒ¨ç½²
- [ ] ç›£æ§éƒ¨ç½²æ—¥èªŒ
- [ ] é©—è­‰æ­£å¼ç’°å¢ƒåŠŸèƒ½
- [ ] æª¢æŸ¥æœå‹™å¥åº·ç‹€æ…‹

## ğŸ“ å­¸ç¿’è·¯å¾‘

1. **æœ¬åœ°é–‹ç™¼** â†’ ä½¿ç”¨ `deploy.sh` ç†Ÿæ‚‰éƒ¨ç½²æµç¨‹
2. **é–‹ç™¼ç’°å¢ƒéƒ¨ç½²** â†’ æ¨é€åˆ° develop åˆ†æ”¯ï¼Œè§€å¯Ÿ CI/CD
3. **æ­£å¼ç’°å¢ƒéƒ¨ç½²** â†’ åˆä½µåˆ° masterï¼Œé«”é©—ç”Ÿç”¢éƒ¨ç½²
4. **ç›£æ§å’Œç¶­è­·** â†’ å­¸ç¿’æ—¥èªŒæŸ¥çœ‹å’Œå•é¡Œæ’æŸ¥
5. **å„ªåŒ–å’Œæ“´å±•** â†’ æ ¹æ“šéœ€æ±‚èª¿æ•´é…ç½®

## ğŸ’¡ æœ€ä½³å¯¦è¸

### åˆ†æ”¯ç­–ç•¥
```
feature/* â†’ develop â†’ master â†’ production
   â†“          â†“         â†“
 é–‹ç™¼      é–‹ç™¼ç’°å¢ƒ   æ­£å¼ç’°å¢ƒ
```

### éƒ¨ç½²é »ç‡
- **é–‹ç™¼ç’°å¢ƒ**: æ¯æ¬¡æäº¤è‡ªå‹•éƒ¨ç½²
- **æ­£å¼ç’°å¢ƒ**: ç¶“éå……åˆ†æ¸¬è©¦å¾Œéƒ¨ç½² (æ¯é€±/æ¯å…©é€±)

### å›æ»¾ç­–ç•¥
- ä¿ç•™æœ€è¿‘ 3-5 å€‹ Docker é¡åƒç‰ˆæœ¬
- ä½¿ç”¨ Git æ¨™ç±¤æ¨™è¨˜æ­£å¼ç™¼å¸ƒç‰ˆæœ¬
- æº–å‚™å¿«é€Ÿå›æ»¾è…³æœ¬

## ğŸ“ æ”¯æ´

å¦‚æœ‰å•é¡Œï¼š
1. æŸ¥çœ‹å°æ‡‰ç’°å¢ƒçš„éƒ¨ç½²æ–‡æª”
2. æª¢æŸ¥ GitHub Actions æ—¥èªŒ
3. æŸ¥çœ‹ Docker å®¹å™¨æ—¥èªŒ
4. åƒè€ƒå¸¸è¦‹å•é¡Œè§£ç­”
5. æäº¤ GitHub Issue

---

**è¨˜ä½**: é–‹ç™¼ç’°å¢ƒç”¨æ–¼æ¸¬è©¦ï¼Œæ­£å¼ç’°å¢ƒç”¨æ–¼ç”Ÿç”¢ã€‚ä¿æŒå…©è€…ç¨ç«‹å¯ä»¥ç¢ºä¿é–‹ç™¼ä¸æœƒå½±éŸ¿ç·šä¸Šæœå‹™ï¼
