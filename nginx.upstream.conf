# ========================================
# Upstream 配置檔 - 藍綠部署切換
# ========================================
# 此檔案定義目前活躍的應用程式環境
# 部署腳本會自動更新此檔案以切換流量
#
# 使用變數方式，讓 Nginx 可以動態解析 DNS
# 即使容器不存在也不會導致啟動失敗

# 應用程式前端主機 (部署時會自動切換)
# 格式: <container_name>:<port>
map $host $app_frontend_host {
    default "app-blue-frontend-1:80";
}

# 應用程式後端主機 (部署時會自動切換)
map $host $app_backend_host {
    default "app-blue-backend-1:8000";
}
