<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="快速將 YouTube 影片加入播放庫或播放清單">
  <title>YouTube Video Manager</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body role="application" aria-label="YouTube 影片管理器">
  <div class="container">
    <h1>YouTube Video Manager</h1>

    <!-- 登入區塊 -->
    <div id="auth-section" class="section" role="region" aria-label="登入區域">
      <button
        id="login-btn"
        class="btn btn-primary"
        aria-label="使用 LINE 帳戶登入"
        title="點擊使用 LINE 帳戶登入">
        LINE 登入
      </button>
    </div>

    <!-- 主功能區塊 -->
    <div id="main-section" class="section hidden" role="region" aria-label="主要功能區域">
      <div id="user-info" aria-label="使用者資訊" aria-live="polite"></div>

      <div class="actions" role="group" aria-label="影片操作">
        <button
          id="add-to-library-btn"
          class="btn btn-success"
          aria-label="將當前影片加入播放庫"
          title="將當前 YouTube 影片加入您的播放庫">
          加入播放庫
        </button>
        <button
          id="add-to-playlist-btn"
          class="btn btn-success"
          aria-label="將當前影片加入播放清單"
          title="選擇播放清單並將當前影片加入">
          加入播放清單
        </button>
      </div>

      <div
        id="message"
        class="message hidden"
        role="status"
        aria-live="assertive"
        aria-atomic="true">
      </div>

      <div class="footer" role="group" aria-label="其他功能">
        <button
          id="settings-btn"
          class="btn btn-link"
          aria-label="開啟設定頁面"
          title="設定預設播放清單和其他選項">
          設定
        </button>
        <button
          id="logout-btn"
          class="btn btn-link"
          aria-label="登出帳戶"
          title="登出您的 LINE 帳戶">
          登出
        </button>
      </div>
    </div>
  </div>

  <!-- 播放清單選擇器 Modal -->
  <div
    id="playlist-modal"
    class="modal hidden"
    role="dialog"
    aria-modal="true"
    aria-labelledby="modal-title"
    aria-describedby="modal-description">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">選擇播放清單</h2>
        <button
          id="modal-close-btn"
          class="close-btn"
          aria-label="關閉播放清單選擇對話框"
          title="按 ESC 或點擊關閉">
          &times;
        </button>
      </div>

      <div class="modal-body">
        <div
          id="playlist-list"
          class="playlist-list"
          role="listbox"
          aria-label="可用的播放清單列表">
          <!-- 播放清單項目將動態添加到此 -->
        </div>

        <div
          id="playlist-empty"
          class="empty-message hidden"
          role="status">
          <p>您還沒有建立播放清單</p>
          <p class="help-text">請先在後端建立播放清單，然後重新嘗試</p>
        </div>

        <div
          id="playlist-loading"
          class="loading hidden"
          role="status"
          aria-live="polite">
          <p>載入播放清單中...</p>
        </div>

        <div
          id="playlist-error"
          class="error hidden"
          role="alert"
          aria-live="assertive">
          <p></p>
        </div>
      </div>

      <div class="modal-footer">
        <button
          id="modal-cancel-btn"
          class="btn btn-secondary"
          aria-label="取消選擇播放清單">
          取消
        </button>
      </div>
    </div>
  </div>

  <script type="module" src="popup.js"></script>
</body>
</html>
